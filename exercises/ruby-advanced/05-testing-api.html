<!DOCTYPE html><html lang=fr><head><meta charset=utf-8 /><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible /><meta content="width=device-width, initial-scale=1.0" name=viewport /><title>Exercices Ruby on Rails Avancé - Cécile Veneziani</title><meta content="Tests de requêtes d'API, TDD et documentation sur une application Ruby on Rails." name=description /><meta content="Lille, Nord" name="geo.placename"/><meta content="50.629250;3.057256" name="geo.position"/><meta content=FR-59 name="geo.region"/><meta content="Cécile Veneziani" itemprop=name /><meta content="Tests de requêtes d'API, TDD et documentation sur une application Ruby on Rails." itemprop=description /><meta content="http://courses.cecilitse.org/assets/images/avatar-dccc6af7.png" itemprop=image /><meta content="Cécile Veneziani" property="og:site_name"/><meta content="Cécile Veneziani" property="og:title"/><meta content="Tests de requêtes d'API, TDD et documentation sur une application Ruby on Rails." property="og:description"/><meta content="http://courses.cecilitse.org/assets/images/avatar-dccc6af7.png" property="og:image"/><meta content=website property="og:type"/><meta content="http://courses.cecilitse.org/exercises/ruby-advanced/05-testing-api.html" property="og:url"/><meta content="Cécile Veneziani" itemprop=name /><meta content="Tests de requêtes d'API, TDD et documentation sur une application Ruby on Rails." itemprop=description /><meta content="http://courses.cecilitse.org/assets/images/avatar-dccc6af7.png" itemprop=image /><meta content=summary name="twitter:card"/><meta content="@cecilitse" name="twitter:site"/><meta content="Cécile Veneziani" name="twitter:title"/><meta content="Tests de requêtes d'API, TDD et documentation sur une application Ruby on Rails." name="twitter:description"/><meta content="http://courses.cecilitse.org/assets/images/avatar-dccc6af7.png" name="twitter:image"/><link href="/assets/images/favicon.ico" rel=icon type="image/ico"/><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel=stylesheet /><link href="/assets/stylesheets/default-90a6aedf.css" rel=stylesheet /></head><body class="exercises exercises_ruby-advanced exercises_ruby-advanced_05-testing-api"><header><div class=row><div class="small-12 columns"><a href="/"><i class="fa fa-home home-icon"></i><span class=hide>Accueil</span></a><h1>Exercices Ruby on Rails Avancé<small>Testing d'API</small></h1></div></div></header><main><div class=row><div class="small-12 columns"><nav class=breadcrumbs><a href="/">Accueil</a><a href="/exercises">Exercises</a><a href="../ruby-advanced">Ruby on Rails Avancé</a><a class=current href="#">Exercices Ruby on Rails Avancé - Testing d'API</a></nav></div></div><section class=exercises-container><div class=row><div class="small-12 large-10 columns"><div class=exercise><h2>Pré-requis</h2><p>Vous avez à disposition une application Ruby on Rails. Nous ferons nos exercises sur celle-ci.</p><p>Cette application contient un certain nombre de fonctionnalités déjà mises en place.</p></div><div class=exercise><h2>Setup API</h2><p>Il nous faut d'abord mettre en place la structure de base de notre API.</p><h3>Exercice</h3><ul><li>Définir votre système de routing d'API</li><li>Définir comment les versions seront gérées (header, URL, etc.)</li><li>Mettre en place cette base : routing + gestion des versions</li></ul></div><div class=exercise><h2>Tests d'endpoints publics</h2><p>Nous allons d'abord nous concentrer sur la mise en place d'endpoints publics. Pour se faire, nous allons faire du <strong>TDD</strong> bien sûr !</p><h3>Exercice</h3><ul><li>Écrire le test d'un endpoint de listing (index)</li><li>L'implémenter</li><li>Écrire le test d'un endpoint de détails (show)</li><li>L'implémenter</li></ul></div><div class=exercise><h2>Tests d'endpoints avec authorisation</h2><p>Nous allons maintenant mettre en place des endpoints qui seraient réservés à un utilisateur "connecté".</p><p>Malheureusement nous n'avons pas accès aux fonctionnalités de Devise quant à la mise en place d'un sign in. Il va falloir mettre en place une autre stratégie.</p><p>Bien sûr, nous continuons sur du <strong>TDD</strong>.</p><h3>Exercice</h3><ul><li>Définir une stratégie de connexion</li><li>Écrire le test d'un endpoint d'ajout (create)</li><li>L'implémenter</li><li>Écrire le test d'un endpoint de mise à jour (update)</li><li>L'implémenter</li></ul></div><div class=exercise><h2>RSpec API Documentation</h2><p>Tentons de générer une documentation à partir de nos tests.</p><h3>Exercice</h3><ul><li>Installer <a href="https://github.com/zipmark/rspec_api_documentation">RSpec API Doc</a></li><li>Dupliquer vos tests de requêtes en tests d'acceptance</li><li>Les convertir en tests RSpec API Doc</li><li>Apporter des précisions sur chaque endpoint : description, paramètres attendus, etc.</li><li>Générer la documentation</li></ul></div><div class=exercise><h2>[BONUS] Payload JSON</h2><p>Jusqu'ici, nous avons fourni un payload JSON basé sur notre modèle. L'objectif est maintenant de fournir un JSON construit spécialement pour le payload.</p><h3>Exercice</h3><ul><li>Choisir une gem et l'installer : Blueprinter, fast_jsonapi, etc.</li><li>Définir les serializers nécessaires</li><li>Mettre en place chaque serializer et définir ses propriétés</li><li>Remplacer le rendering précédent par vos serializers</li><li>Relancer vos tests, tout devrait encore passer</li></ul></div></div></div></section></main><footer><div class=banner></div><div class="row footer--license"><div class="small-12 columns"><p>Contenu pubilé sous <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA </a></p></div></div></footer><script src="/assets/javascripts/default.bundle-9669decd.js"></script></body></html>